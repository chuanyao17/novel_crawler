# 小說爬蟲開發清單

## 基礎設置
- [x] 建立專案結構
- [x] 設定必要的 dependencies (requests, beautifulsoup4, ebooklib, tqdm)
- [x] 建立基本的錯誤處理機制

## 爬蟲核心功能
- [x] 網頁請求與解析模組
  - [x] User-Agent 設定
  - [x] 編碼處理
  - [x] 請求延遲機制 (0.5-1秒)
  - [x] 重試機制 (最多3次)

## 小說資訊解析
- [x] 書名提取
- [x] 作者提取
- [x] 連載狀態提取
- [x] 章節列表獲取
  - [x] 章節標題
  - [x] 章節URL
  - [x] 章節排序

## 內容處理
- [x] 章節內容提取
- [x] 內容清理
  - [x] 移除廣告
  - [x] 移除多餘空白
  - [x] 修正特殊字符
  - [x] 移除書名標記 (《》)

## EPUB生成
- [x] 建立EPUB基本結構
- [x] 設置元數據
  - [x] 標題
  - [x] 作者
  - [x] 語言
- [x] 生成目錄
- [x] 格式化章節內容
- [x] 生成EPUB檔案
- [x] 智慧檔名生成
  - [x] 連載狀態判斷 (已完結/連載中)
  - [x] 章節範圍標記
  - [x] 最新章節標記

## 使用者介面
- [x] 輸入網址驗證
- [x] 顯示爬取資訊確認
- [x] 進度顯示 (tqdm)
- [x] 錯誤提示
- [x] 章節範圍選擇
  - [x] 全部章節
  - [x] 指定範圍
  - [x] 最新章節
- [x] 自定義輸出路徑

## 效能優化
- [x] 多線程下載  # 已完成，效能提升約40-50%
  - [x] 線程數控制 (目前固定3線程)
  - [x] 錯誤重試 (與單線程共用機制)
  - [x] 延遲調整 (0.5-1秒隨機延遲)
- [ ] 動態延遲調整
  - [ ] 根據429錯誤自動調整延遲
  - [ ] 自適應線程數
- [ ] 錯誤重試策略
  - [ ] 指數退避重試
  - [ ] 429錯誤特殊處理
  - [ ] 錯誤統計與報告

## 額外功能
- [ ] 支援續傳
  - [ ] 斷點記錄
  - [ ] 進度恢復
- [ ] 支援多網站
  - [ ] 抽象化爬蟲介面
  - [ ] 網站特定解析器
- [ ] 輸出日誌
  - [ ] 錯誤日誌
  - [ ] 下載記錄
- [ ] 轉換簡繁體選項
  - [ ] 繁轉簡
  - [ ] 簡轉繁
  - [ ] 保持原文

## 完成狀態
- [x] 基礎功能完成
- [x] 基礎測試完成 (8 tests)
- [x] 基礎文檔完成
- [ ] 進階功能開發中